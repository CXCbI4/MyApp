(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t){},250:function(e,t,a){e.exports=a(463)},443:function(e,t,a){},463:function(e,t,a){"use strict";a.r(t);a(251),a(253);var n=a(0),o=a.n(n),i=a(44),c=a.n(i),r=a(36),l=a(182),s=a(30),u=a(19),p=a(8),d=a(77),v=a(52),m=a.n(v),h=a(70),y=function(e){return{type:"SET_ACCESS_TOKEN",payload:e}},O=function(e,t){return t.access_token=Se.getState().vkui.accessToken,t.v=void 0===t.v?"5.52":t.v,h.a.send("VKWebAppCallAPIMethod",{method:e,params:t}).then(function(e){return e.data.response}).catch(function(e){return e})},b={activeStory:null,activeView:null,activePanel:null,storiesHistory:[],viewsHistory:[],panelsHistory:[],activeModals:[],modalHistory:[],popouts:[],scrollPosition:[]},f={accessToken:void 0,colorScheme:"client_light",activeTab:[],componentScroll:[]},j={forms:[]},E=Object(r.combineReducers)({vkui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLOR_SCHEME":return Object(p.a)({},e,{colorScheme:t.payload});case"SET_ACCESS_TOKEN":return Object(p.a)({},e,{accessToken:t.payload});case"SET_ACTIVE_TAB":return Object(p.a)({},e,{activeTab:Object(p.a)({},e.activeTab,Object(u.a)({},t.payload.component,t.payload.tab))});case"SET_SCROLL_POSITION":return Object(p.a)({},e,{componentScroll:Object(p.a)({},e.componentScroll,Object(u.a)({},t.payload.component,{x:t.payload.x,y:t.payload.y}))});default:return e}},router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":var a=t.payload.view,n=t.payload.panel;window.history.pushState(null,null);var o=e.panelsHistory[a]||[],i=e.viewsHistory[e.activeStory]||[],c=i.indexOf(a);return-1!==c&&i.splice(c,1),-1===o.indexOf(n)&&(o=[].concat(Object(d.a)(o),[n])),o.length>1&&h.a.send("VKWebAppEnableSwipeBack",{}),Object(p.a)({},e,{activeView:a,activePanel:n,panelsHistory:Object(p.a)({},e.panelsHistory,Object(u.a)({},a,o)),viewsHistory:Object(p.a)({},e.viewsHistory,Object(u.a)({},e.activeStory,[].concat(Object(d.a)(i),[a]))),scrollPosition:Object(p.a)({},e.scrollPosition,Object(u.a)({},e.activeStory+"_"+e.activeView+"_"+e.activePanel,window.pageYOffset))});case"SET_STORY":window.history.pushState(null,null);var r=e.viewsHistory[t.payload.story]||[t.payload.story],l=e.storiesHistory,s=r[r.length-1],v=e.panelsHistory[s]||[t.payload.initial_panel],m=v[v.length-1];if(t.payload.story===e.activeStory)if(v.length>1){var y=v.shift();m=(v=[y])[v.length-1]}else if(r.length>1){var O=r.shift();s=(r=[O])[r.length-1],m=(v=e.panelsHistory[s])[v.length-1]}return t.payload.story===e.activeStory&&1===v.length&&window.pageYOffset>0&&(window.scrollTo(0,30),function e(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>30||t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))}()),(-1===l.indexOf(t.payload.story)||l[0]===t.payload.story&&l[l.length-1]!==t.payload.story)&&(l=[].concat(Object(d.a)(l),[t.payload.story])),Object(p.a)({},e,{activeStory:t.payload.story,activeView:s,activePanel:m,storiesHistory:l,viewsHistory:Object(p.a)({},e.viewsHistory,Object(u.a)({},s,r)),panelsHistory:Object(p.a)({},e.panelsHistory,Object(u.a)({},s,v)),scrollPosition:Object(p.a)({},e.scrollPosition,Object(u.a)({},e.activeStory+"_"+e.activeView+"_"+e.activePanel,window.pageYOffset))});case"GO_BACK":var f=e.activeView,j=e.activePanel,E=e.activeStory,w=e.popouts;if(w[f])return w[f]=null,Object(p.a)({},e,{popouts:Object(p.a)({},e.popouts,{popoutsData:w})});var g=e.modalHistory[f];if(void 0!==g&&0!==g.length){var S=g[g.length-2]||null;return null===S?g=[]:-1!==g.indexOf(S)?g=g.splice(0,g.indexOf(S)+1):g.push(S),Object(p.a)({},e,{activeModals:Object(p.a)({},e.activeModals,Object(u.a)({},f,S)),modalHistory:Object(p.a)({},e.modalHistory,Object(u.a)({},f,g))})}var k=e.panelsHistory[f]||[],P=e.viewsHistory[e.activeStory]||[],_=e.storiesHistory;if(k.length>1)k.pop(),j=k[k.length-1];else if(P.length>1){P.pop(),f=P[P.length-1];var T=e.panelsHistory[f];j=T[T.length-1]}else if(_.length>1&&"Android"===t.payload.from){_.pop(),E=_[_.length-1],f=e.viewsHistory[E][e.viewsHistory[E].length-1];var H=e.panelsHistory[f];j=H.length>1?H[H.length-1]:H[0]}else h.a.send("VKWebAppClose",{status:"success"});return 1===k.length&&"iOS"===t.payload.from&&h.a.send("VKWebAppDisableSwipeBack",{}),Object(p.a)({},e,{activeView:f,activePanel:j,activeStory:E,viewsHistory:Object(p.a)({},e.viewsHistory,Object(u.a)({},e.activeView,P)),panelsHistory:Object(p.a)({},e.panelsHistory,Object(u.a)({},e.activeView,k))});case"OPEN_POPOUT":return window.history.pushState(null,null),Object(p.a)({},e,{popouts:Object(p.a)({},e.popouts,Object(u.a)({},e.activeView,t.payload.popout))});case"CLOSE_POPOUT":return Object(p.a)({},e,{popouts:Object(p.a)({},e.popouts,Object(u.a)({},e.activeView,null))});case"OPEN_MODAL":window.history.pushState(null,null);var A=t.payload.id||null,C=e.modalHistory[e.activeView]?Object(d.a)(e.modalHistory[e.activeView]):[];return null===A?C=[]:-1!==C.indexOf(A)?C=C.splice(0,C.indexOf(A)+1):C.push(A),Object(p.a)({},e,{activeModals:Object(p.a)({},e.activeModals,Object(u.a)({},e.activeView,A)),modalHistory:Object(p.a)({},e.modalHistory,Object(u.a)({},e.activeView,C))});case"CLOSE_MODAL":var V=e.modalHistory[e.activeView][e.modalHistory[e.activeView].length-2]||null,M=e.modalHistory[e.activeView]?Object(d.a)(e.modalHistory[e.activeView]):[];return null===V?M=[]:-1!==M.indexOf(V)?M=M.splice(0,M.indexOf(V)+1):M.push(V),Object(p.a)({},e,{activeModals:Object(p.a)({},e.activeModals,Object(u.a)({},e.activeView,V)),modalHistory:Object(p.a)({},e.modalHistory,Object(u.a)({},e.activeView,M))});default:return e}},formData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_FORM_DATA":return Object(p.a)({},e,{forms:Object(p.a)({},e.forms,Object(u.a)({},t.payload.form,t.payload.data))});default:return e}}}),w=a(184),g=function(e,t){return{type:"SET_STORY",payload:{story:e,initial_panel:t}}},S=function(e,t){return{type:"SET_PAGE",payload:{view:e,panel:t}}},k=function(){return{type:"GO_BACK",payload:{from:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iOS"}}},P=function(e){return{type:"OPEN_POPOUT",payload:{popout:e}}},_=function(){return{type:"CLOSE_POPOUT"}},T=function(e){return{type:"OPEN_MODAL",payload:{id:e}}},H=function(){return{type:"CLOSE_MODAL"}},A=(a(442),a(443),a(37)),C=a(38),V=a(40),M=a(39),B=a(41),L=a(5),x=a(192),D=a.n(x),G=a(193),K=a.n(G),I=function(e){function t(){return Object(A.a)(this,t),Object(V.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.setPage;e.withoutEpic;return o.a.createElement(L.o,{id:t},o.a.createElement(L.p,null,"\u0414\u0430\u0440\u0438 \u043f\u043e\u0434\u0430\u0440\u043a\u0438 \u0434\u0440\u0443\u0437\u044c\u044f\u043c!"),o.a.createElement(L.g,null,o.a.createElement(L.e,null,o.a.createElement(L.b,{size:"l",stretched:!0,onClick:function(){return a("home","groups")}},"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0440\u0443\u0437\u0435\u0439"))))}}]),t}(o.a.Component),N={setPage:S,goBack:k,openPopout:P,closePopout:_,openModal:T},U=Object(s.b)(null,N)(I),W=a(141),z=a.n(W),F=a(194),R=function(e){function t(){return Object(A.a)(this,t),Object(V.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.photo,a=e.nameF,n=e.nameL;return o.a.createElement(L.c,{before:o.a.createElement(L.a,{size:50,src:t})},a," ",n)}}]),t}(n.PureComponent),Y=function(e){function t(){var e,a;Object(A.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(V.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={friends:{other:[]},loading:!0,errorGetAuthToken:!1},a}return Object(B.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){void 0===this.props.accessToken?console.log(this.getAuthToken()):this.getGroupsList()}},{key:"getAuthToken",value:function(){var e;this.props.dispatch((e=["friends"],function(t){h.a.send("VKWebAppGetAuthToken",{app_id:7236336,scope:e.join(",")}).then(function(e){t(y(e.data.access_token))}).catch(function(){t(y(null))})}))}},{key:"componentDidUpdate",value:function(e,t,a){this.props!==e&&(null===this.props.accessToken?this.setState({loading:!1,errorGetAuthToken:!0}):(this.setState({loading:!0,errorGetAuthToken:!1}),this.getGroupsList()))}},{key:"getGroupsList",value:function(){var e=Object(F.a)(z.a.mark(function e(){var t,a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("friends.search",{fields:"first_name,last_name,photo_100",count:"1000"});case 2:t=e.sent,a=t.items,console.log(a),localStorage.setItem("userFriends",JSON.stringify(a)),this.setState({friends:{other:a},loading:!1});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.goBack,i=function(e){var t=null;return void 0!==e&&null!==e&&0!==e.length&&(t=e.map(function(e){return o.a.createElement(R,{photo:e.photo_100,nameF:e.first_name,nameL:e.last_name})})),console.log(t),t}(this.state.friends.other);return console.log(this.state.friends.other),o.a.createElement(L.o,{id:a},o.a.createElement(L.p,{left:o.a.createElement(L.q,{onClick:function(){return n()}})},"\u0414\u0440\u0443\u0437\u044c\u044f"),this.state.loading&&o.a.createElement(L.r,null),!this.state.loading&&this.state.errorGetAuthToken&&o.a.createElement(L.g,null,o.a.createElement(L.e,null,"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445."),o.a.createElement(L.e,null,o.a.createElement(L.b,{size:"l",stretched:!0,onClick:function(){return e.getAuthToken()}},"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e"))),!this.state.loading&&!this.state.errorGetAuthToken&&i&&o.a.createElement(L.g,{title:"\u0412\u0430\u0448\u0438 \u0434\u0440\u0443\u0437\u044c\u044f"},o.a.createElement(L.k,null,i)))}}]),t}(o.a.Component);var J=Object(s.b)(function(e){return{accessToken:e.vkui.accessToken}},function(e){return Object(p.a)({dispatch:e},Object(r.bindActionCreators)({goBack:k,openPopout:P,closePopout:_,openModal:T},e))})(Y),q=a(195),Q=a.n(q),X=a(196),Z=a.n(X),$=a(84),ee=a.n($),te=a(142),ae=a.n(te),ne=a(197),oe=a.n(ne),ie=a(199),ce=a.n(ie),re=a(198),le=a.n(re),se={setPage:S,goBack:k,openPopout:P,closePopout:_,openModal:T},ue=Object(s.b)(null,se)(function(e){var t=e.id,a=e.go,n=e.setPage,i=e.fetchedUser;return o.a.createElement(Q.a,{id:t},o.a.createElement(Z.a,null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0434\u0430\u0440\u043a\u043e\u0432"),i&&o.a.createElement(ae.a,{title:"User Data Fetched with VK Connect"},o.a.createElement(oe.a,{before:i.photo_200?o.a.createElement(le.a,{src:i.photo_200}):null,description:i.city&&i.city.title?i.city.title:""},"".concat(i.first_name," ").concat(i.last_name))),o.a.createElement(ae.a,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},o.a.createElement(ce.a,null,o.a.createElement(ee.a,{size:"l",stretched:!0,onClick:function(){return n("home","groups")}},"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0440\u0443\u0437\u0435\u0439"),o.a.createElement(ee.a,{size:"xl",level:"2",onClick:function(){return n("more","example")}},"\u041f\u043e\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u043d\u0435 \u043f\u043e\u0434\u0430\u0440\u043a\u0438!"),o.a.createElement(ee.a,{size:"xl",level:"2",onClick:function(){return n("more","example1")}},"\u041f\u043e\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u043d\u0435 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435!"),o.a.createElement(ee.a,{size:"xl",level:"2",onClick:a,"data-to":"Persik"},"\u0417\u0434\u0435\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442"))))}),pe=function(e){function t(){return Object(A.a)(this,t),Object(V.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id;e.setPage;return o.a.createElement(L.o,{id:t},o.a.createElement(L.p,{noShadow:!0},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0434\u0430\u0440\u043a\u043e\u0432"),o.a.createElement(L.g,null,o.a.createElement(L.k,null,o.a.createElement(L.e,null,"\u0417\u0434\u0435\u0441\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0434\u0430\u0440\u043a\u043e\u0432."))))}}]),t}(o.a.Component),de={setPage:S,goBack:k,openPopout:P,closePopout:_,openModal:T},ve=Object(s.b)(function(e){return{activeTab:e.vkui.activeTab}},de)(pe),me=a(200),he=a.n(me),ye=a(201),Oe=a.n(ye),be=a(83),fe=a.n(be),je=function(e){function t(){return Object(A.a)(this,t),Object(V.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.onClose;return o.a.createElement(L.l,{id:t,header:o.a.createElement(L.m,{left:!L.i&&o.a.createElement(L.h,{onClick:a},o.a.createElement(fe.a,null)),right:L.i&&o.a.createElement(L.h,{onClick:a},o.a.createElement(Oe.a,null))},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0431\u043e\u0442\u0435"),onClose:a,settlingHeight:80},o.a.createElement(L.c,{description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",before:o.a.createElement(L.a,{size:40,src:"https://vk.com/images/community_100.png?ava=1"})},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),o.a.createElement(L.k,null,o.a.createElement(L.c,null,o.a.createElement(L.j,{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"},"8800")),o.a.createElement(L.c,null,o.a.createElement(L.j,{title:"\u0417\u0430\u043f\u0438\u0441\u0435\u0439"},"555")),o.a.createElement(L.c,null,o.a.createElement(L.j,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"},"3535"))))}}]),t}(o.a.Component),Ee=Object(s.b)()(je),we=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(V.a)(this,Object(M.a)(t).call(this,e))).lastAndroidBackAction=0,a}return Object(B.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.goBack;(0,t.dispatch)(function(e){m.a.subscribe(function t(a){"VKWebAppUpdateConfig"===a.detail.type&&(m.a.unsubscribe(t),e({type:"SET_COLOR_SCHEME",payload:a.detail.data.scheme}))}),h.a.send("VKWebAppInit",{})}),window.onpopstate=function(){var t=+new Date;t-e.lastAndroidBackAction>500?(e.lastAndroidBackAction=t,a("Android")):window.history.pushState(null,null)}}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props,o=n.activeView,i=n.activeStory,c=n.activePanel,r=n.scrollPosition;if(e.activeView!==o||e.activePanel!==c||e.activeStory!==i){var l=r[i+"_"+o+"_"+c]||0;window.scroll(0,l)}}},{key:"render",value:function(){var e=this.props,t=e.goBack,a=e.setStory,n=e.closeModal,i=e.popouts,c=e.activeView,r=e.activeStory,l=e.activePanel,s=e.activeModals,u=e.panelsHistory,p=e.colorScheme,d=void 0===u[c]?[c]:u[c],v=void 0===i[c]?null:i[c],m=void 0===s[c]?null:s[c],h=o.a.createElement(L.n,{activeModal:m},o.a.createElement(he.a,{id:"MODAL_PAGE_BOTS_LIST",onClose:function(){return n()}}),o.a.createElement(Ee,{id:"MODAL_PAGE_BOT_INFO",onClose:function(){return n()}}));return o.a.createElement(L.d,{isWebView:!0,scheme:p},o.a.createElement(L.f,{activeStory:r,tabbar:o.a.createElement(L.t,null,o.a.createElement(L.u,{onClick:function(){return a("home","base")},selected:"home"===r},o.a.createElement(D.a,null)),o.a.createElement(L.u,{onClick:function(){return a("more","callmodal")},selected:"more"===r},o.a.createElement(K.a,null)))},o.a.createElement(L.s,{id:"home",activeView:c,popout:v},o.a.createElement(L.v,{id:"home",modal:h,activePanel:l,history:d,onSwipeBack:function(){return t()}},o.a.createElement(U,{id:"base",withoutEpic:!1}),o.a.createElement(J,{id:"groups"}))),o.a.createElement(L.s,{id:"more",activeView:c,popout:v},o.a.createElement(L.v,{id:"more",modal:h,activePanel:l,history:d,onSwipeBack:function(){return t()}},o.a.createElement(ue,{id:"callmodal"})),o.a.createElement(L.v,{id:"modal",modal:h,activePanel:l,history:d,onSwipeBack:function(){return t()}},o.a.createElement(ve,{id:"filters"})))))}}]),t}(o.a.Component);var ge=Object(s.b)(function(e){return{activeView:e.router.activeView,activePanel:e.router.activePanel,activeStory:e.router.activeStory,panelsHistory:e.router.panelsHistory,activeModals:e.router.activeModals,popouts:e.router.popouts,scrollPosition:e.router.scrollPosition,colorScheme:e.vkui.colorScheme}},function(e){return Object(p.a)({dispatch:e},Object(r.bindActionCreators)({setStory:g,goBack:k,closeModal:H},e))})(we);a.d(t,"store",function(){return Se});var Se=Object(r.createStore)(E,Object(w.composeWithDevTools)(Object(r.applyMiddleware)(l.a)));Se.dispatch(g("home","base")),c.a.render(o.a.createElement(s.a,{store:Se},o.a.createElement(ge,null)),document.getElementById("root"))}},[[250,1,2]]]);
//# sourceMappingURL=main.7025424c.chunk.js.map